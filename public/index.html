<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>Email Filter Activity</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js"></script>
</head>
<body>
  <h1>Email Filter Activity UI</h1>
  <p>Inizializzazione Custom Activity...</p>

  <script>
    require.config({
      paths: {
        postmonger: 'https://cdn.jsdelivr.net/npm/postmonger@0.3.2/postmonger'
      }
    });

    require(['postmonger'], function (Postmonger) {
      const connection = new Postmonger.Session();

      connection.on('initActivity', function (payload) {
        console.log('Payload ricevuto da SFMC:', payload);
      });

      connection.on('requestedTokens', function (tokens) {
        console.log('Token ricevuti:', tokens);
      });

      connection.trigger('ready'); // segnala a SFMC che la UI Ã¨ pronta
      connection.trigger('requestTokens');
      connection.trigger('requestEndpoints');
    });
  </script>
</body>
</html>
