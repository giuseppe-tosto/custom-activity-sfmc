<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Email Filter Activity</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js"></script>
</head>
<body>
  <h1>Inizializzazione Email Filter Activity...</h1>
  <script>
    require.config({
      paths: {
        postmonger: 'https://cdn.jsdelivr.net/npm/postmonger@0.3.2/postmonger'
      }
    });

    require(['postmonger'], function (Postmonger) {
      const connection = new Postmonger.Session();

      connection.on('initActivity', function (payload) {
        console.log('‚ñ∂Ô∏è Attivit√† inizializzata con payload:', payload);
      });

      connection.on('requestedTokens', function (tokens) {
        console.log('üîê Token ricevuti:', tokens);
      });

      connection.trigger('ready');             // Notifica a SFMC che √® pronta
      connection.trigger('requestTokens');     // Richiede i token
      connection.trigger('requestEndpoints');  // Richiede gli endpoint
    });
  </script>
</body>
</html>
